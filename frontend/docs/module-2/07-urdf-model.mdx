---
id: chapter-7-urdf-model
title: "Chapter 7: URDF Model Definition"
description: "Learn to define robot structure using URDF (Unified Robot Description Format) files for simulation and control."
sidebar_position: 7
module: 2
part: 2
chapter_index: 7
learning_objectives:
  - Understand URDF XML structure
  - Define links (rigid bodies) and joints (connections)
  - Add collision and visual properties
  - Include inertia for realistic simulation
  - Create robot models from scratch
prerequisites: [4, 6]
keywords:
  - URDF
  - XML
  - Links
  - Joints
  - Inertia
  - Collision
  - Visualization
---

# Chapter 7: URDF Model Definition

## Introduction

URDF (Unified Robot Description Format) is an XML-based standard for describing robot structure. It defines the kinematic and dynamic properties of your robot, enabling simulation and control frameworks to understand the robot's structure.

## URDF Structure Basics

### XML Hierarchy

```xml
<?xml version="1.0"?>
<robot name="my_robot">
    <!-- Define links (rigid bodies) -->
    <link name="base_link">
        ...
    </link>

    <!-- Define joints (connections between links) -->
    <joint name="joint_name" type="revolute">
        ...
    </joint>
</robot>
```

## Links (Rigid Bodies)

### Simple Link Definition

```xml
<link name="base_link">
    <inertial>
        <mass value="5.0"/>
        <origin xyz="0 0 0"/>
        <inertia ixx="0.1" ixy="0" ixz="0"
                 iyy="0.1" iyz="0"
                 izz="0.1"/>
    </inertial>

    <visual>
        <geometry>
            <box size="0.5 0.5 1.0"/>
        </geometry>
        <material name="blue">
            <color rgba="0 0 1 1"/>
        </material>
    </visual>

    <collision>
        <geometry>
            <box size="0.5 0.5 1.0"/>
        </geometry>
    </collision>
</link>
```

### Geometry Types

**Box (Rectangular Solid)**
```xml
<geometry>
    <box size="length width height"/>
</geometry>
```

**Cylinder**
```xml
<geometry>
    <cylinder radius="0.1" length="0.5"/>
</geometry>
```

**Sphere**
```xml
<geometry>
    <sphere radius="0.1"/>
</geometry>
```

**Mesh (from STL/DAE file)**
```xml
<geometry>
    <mesh filename="package://my_robot/meshes/arm.stl" scale="1 1 1"/>
</geometry>
```

### Inertial Properties

**Calculating Inertia**

For a box:
```
Ixx = (1/12) * m * (y² + z²)
Iyy = (1/12) * m * (x² + z²)
Izz = (1/12) * m * (x² + y²)
```

For a cylinder (around central axis):
```
Ixx = (1/12) * m * (3*r² + h²)
Iyy = (1/12) * m * (3*r² + h²)
Izz = (1/2) * m * r²
```

**Example: Box Inertia**
```python
def calculate_box_inertia(mass, x, y, z):
    """Calculate inertia tensor for a box."""
    ixx = (1/12) * mass * (y**2 + z**2)
    iyy = (1/12) * mass * (x**2 + z**2)
    izz = (1/12) * mass * (x**2 + y**2)
    return ixx, iyy, izz

# Example: 5kg box, 0.5x0.5x1.0 meters
ixx, iyy, izz = calculate_box_inertia(5, 0.5, 0.5, 1.0)
print(f"Ixx={ixx:.3f}, Iyy={iyy:.3f}, Izz={izz:.3f}")
# Output: Ixx=0.271, Iyy=0.271, Izz=0.104
```

## Joints (Connections)

### Joint Types

**Revolute Joint (Rotating)**
```xml
<joint name="elbow_joint" type="revolute">
    <parent link="upper_arm"/>
    <child link="lower_arm"/>
    <origin xyz="0 0 0.3" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>  <!-- Rotation axis -->
    <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>
</joint>
```

**Prismatic Joint (Sliding)**
```xml
<joint name="linear_joint" type="prismatic">
    <parent link="base"/>
    <child link="slider"/>
    <origin xyz="0 0 0"/>
    <axis xyz="0 0 1"/>  <!-- Sliding axis (Z direction) -->
    <limit lower="0" upper="0.5" effort="100" velocity="0.5"/>
</joint>
```

**Fixed Joint (No Movement)**
```xml
<joint name="camera_mount" type="fixed">
    <parent link="head"/>
    <child link="camera"/>
    <origin xyz="0 0 0.1"/>
</joint>
```

**Continuous Joint (Unlimited Rotation)**
```xml
<joint name="wheel_joint" type="continuous">
    <parent link="chassis"/>
    <child link="wheel"/>
    <origin xyz="0 0.15 0"/>
    <axis xyz="0 1 0"/>  <!-- Rotation around Y-axis -->
    <limit effort="10" velocity="10"/>
</joint>
```

### Joint Origin and Axes

**Origin (xyz, rpy)**
```xml
<origin xyz="0.1 0.2 0.3" rpy="0 0 1.57"/>
```
- xyz: position relative to parent (x, y, z in meters)
- rpy: orientation (roll, pitch, yaw in radians)

**Axis**
```xml
<axis xyz="0 0 1"/>  <!-- Z-axis rotation -->
<axis xyz="0 1 0"/>  <!-- Y-axis rotation -->
<axis xyz="1 0 0"/>  <!-- X-axis rotation -->
<axis xyz="1 1 0"/>  <!-- Diagonal axis (normalized) -->
```

## Complete Example: Simple Humanoid Arm

```xml
<?xml version="1.0"?>
<robot name="simple_arm">
    <!-- Base/Shoulder -->
    <link name="base_link">
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.01" ixy="0" ixz="0"
                     iyy="0.01" iyz="0"
                     izz="0.01"/>
        </inertial>

        <visual>
            <geometry>
                <box size="0.1 0.1 0.1"/>
            </geometry>
            <material name="grey">
                <color rgba="0.5 0.5 0.5 1"/>
            </material>
        </visual>

        <collision>
            <geometry>
                <box size="0.1 0.1 0.1"/>
            </geometry>
        </collision>
    </link>

    <!-- Upper Arm -->
    <link name="upper_arm">
        <inertial>
            <mass value="1.5"/>
            <origin xyz="0 0 -0.15"/>
            <inertia ixx="0.05" ixy="0" ixz="0"
                     iyy="0.05" iyz="0"
                     izz="0.01"/>
        </inertial>

        <visual>
            <origin xyz="0 0 -0.15" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.03" length="0.3"/>
            </geometry>
            <material name="blue">
                <color rgba="0 0 1 1"/>
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 -0.15" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.03" length="0.3"/>
            </geometry>
        </collision>
    </link>

    <!-- Shoulder Joint -->
    <joint name="shoulder_joint" type="revolute">
        <parent link="base_link"/>
        <child link="upper_arm"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>
        <dynamics damping="0.1" friction="0.1"/>
    </joint>

    <!-- Forearm -->
    <link name="forearm">
        <inertial>
            <mass value="1.0"/>
            <origin xyz="0 0 -0.12"/>
            <inertia ixx="0.03" ixy="0" ixz="0"
                     iyy="0.03" iyz="0"
                     izz="0.01"/>
        </inertial>

        <visual>
            <origin xyz="0 0 -0.12" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.025" length="0.25"/>
            </geometry>
            <material name="red">
                <color rgba="1 0 0 1"/>
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 -0.12" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.025" length="0.25"/>
            </geometry>
        </collision>
    </link>

    <!-- Elbow Joint -->
    <joint name="elbow_joint" type="revolute">
        <parent link="upper_arm"/>
        <child link="forearm"/>
        <origin xyz="0 0 -0.3" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="-2.09" upper="2.09" effort="5" velocity="1"/>
        <dynamics damping="0.1" friction="0.1"/>
    </joint>

    <!-- End Effector/Hand -->
    <link name="hand">
        <inertial>
            <mass value="0.5"/>
            <origin xyz="0 0 -0.05"/>
            <inertia ixx="0.01" ixy="0" ixz="0"
                     iyy="0.01" iyz="0"
                     izz="0.01"/>
        </inertial>

        <visual>
            <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <geometry>
                <sphere radius="0.04"/>
            </geometry>
            <material name="yellow">
                <color rgba="1 1 0 1"/>
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <geometry>
                <sphere radius="0.04"/>
            </geometry>
        </collision>
    </link>

    <!-- Wrist Joint -->
    <joint name="wrist_joint" type="revolute">
        <parent link="forearm"/>
        <child link="hand"/>
        <origin xyz="0 0 -0.25" rpy="0 0 0"/>
        <axis xyz="1 0 0"/>
        <limit lower="-1.57" upper="1.57" effort="3" velocity="1"/>
        <dynamics damping="0.05" friction="0.05"/>
    </joint>
</robot>
```

## Material Definition

### Color Materials

```xml
<material name="blue">
    <color rgba="0 0 1 1"/>  <!-- Red Green Blue Alpha -->
</material>

<!-- Common colors -->
<material name="red">
    <color rgba="1 0 0 1"/>
</material>

<material name="green">
    <color rgba="0 1 0 1"/>
</material>

<material name="white">
    <color rgba="1 1 1 1"/>
</material>

<material name="black">
    <color rgba="0 0 0 1"/>
</material>

<material name="grey">
    <color rgba="0.5 0.5 0.5 1"/>
</material>
```

### Texture Materials

```xml
<material name="textured">
    <texture filename="package://my_robot/textures/metal.png"/>
</material>
```

## Dynamic Properties

### Adding Friction and Damping

```xml
<joint name="my_joint" type="revolute">
    <parent link="parent_link"/>
    <child link="child_link"/>
    <origin xyz="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>

    <!-- Dynamics for simulation -->
    <dynamics damping="0.1" friction="0.1"/>
</joint>
```

- **damping**: Velocity-dependent friction (slows joint motion)
- **friction**: Coulomb friction (opposes motion)

## Using URDF in Simulation

### Loading in PyBullet

```python
import pybullet as p
import pybullet_data

# Connect and setup
client = p.connect(p.GUI)
p.setGravity(0, 0, -9.81)
p.setAdditionalSearchPath(pybullet_data.getDataPath())

# Load URDF
robot_id = p.loadURDF("simple_arm.urdf")

# Get joint info
for i in range(p.getNumJoints(robot_id)):
    info = p.getJointInfo(robot_id, i)
    print(f"Joint {i}: {info[1].decode()}")
    print(f"  Type: {info[2]}")
    print(f"  Lower limit: {info[8]}")
    print(f"  Upper limit: {info[9]}")

p.disconnect()
```

### Validating URDF

Use the URDF parser to check for errors:

```bash
# Online URDF validator: https://www.wobotinnovation.com/URDF_Validator/
# Or use Python:

import urdf_parser_py.urdf as urdf_parser

try:
    robot = urdf_parser.URDF.from_xml_file("my_robot.urdf")
    print(f"Robot name: {robot.name}")
    print(f"Number of links: {len(robot.links)}")
    print(f"Number of joints: {len(robot.joints)}")
except Exception as e:
    print(f"URDF parsing error: {e}")
```

## Best Practices

### Naming Conventions

```xml
<!-- Good naming -->
<link name="base_link"/>
<link name="left_shoulder"/>
<joint name="left_shoulder_joint"/>

<!-- Avoid spaces and special characters -->
<link name="bad-link-name"/>  <!-- Don't use hyphens -->
<link name="bad link"/>        <!-- Don't use spaces -->
```

### Link Hierarchy

```
base_link
├── torso
│   ├── head
│   │   ├── camera
│   │   └── microphone
│   ├── left_arm
│   │   ├── left_shoulder
│   │   ├── left_elbow
│   │   └── left_hand
│   └── right_arm
│       ├── right_shoulder
│       ├── right_elbow
│       └── right_hand
└── legs
    ├── left_leg
    │   ├── left_hip
    │   ├── left_knee
    │   └── left_ankle
    └── right_leg
        ├── right_hip
        ├── right_knee
        └── right_ankle
```

### Reducing Simulation Complexity

```xml
<!-- Use simplified collision geometries -->
<collision>
    <!-- Simpler than visual geometry -->
    <geometry>
        <box size="0.1 0.1 0.3"/>  <!-- Instead of mesh -->
    </geometry>
</collision>

<!-- Fix non-moving parts with fixed joints -->
<joint name="camera_mount" type="fixed">
    <parent link="head"/>
    <child link="camera"/>
    <origin xyz="0 0 0.05"/>
</joint>

<!-- Set unnecessary links with low mass -->
<inertial>
    <mass value="0.01"/>  <!-- Very light -->
    <inertia ixx="0.001" ixy="0" ixz="0"
             iyy="0.001" iyz="0"
             izz="0.001"/>
</inertial>
```

## Advanced Features

### Transmission (Motor Specifications)

```xml
<transmission name="shoulder_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="shoulder_joint">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="shoulder_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>100</mechanicalReduction>  <!-- Gear ratio -->
    </actuator>
</transmission>
```

### Sensors in URDF

```xml
<!-- Gazebo plugin for camera sensor -->
<gazebo reference="camera_link">
    <sensor type="camera" name="camera_sensor">
        <update_rate>30.0</update_rate>
        <camera name="head">
            <horizontal_fov>1.3962634</horizontal_fov>
            <image>
                <width>800</width>
                <height>800</height>
                <format>R8G8B8</format>
            </image>
            <clip>
                <near>0.02</near>
                <far>300</far>
            </clip>
        </camera>
        <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
            <cameraName>camera</cameraName>
            <imageTopicName>image_raw</imageTopicName>
            <cameraInfoTopicName>camera_info</cameraInfoTopicName>
            <frameName>camera_optical_frame</frameName>
        </plugin>
    </sensor>
</gazebo>
```

## Creating URDF from CAD

### Converting from SolidWorks/CAD

1. Export from CAD as STEP or IGES
2. Convert to STL/DAE using FreeCAD
3. Reference meshes in URDF:

```xml
<visual>
    <geometry>
        <mesh filename="package://my_robot/meshes/part.stl" scale="0.001 0.001 0.001"/>
    </geometry>
</visual>
```

## Summary

| Element | Purpose | Example |
|---------|---------|---------|
| `<link>` | Rigid body | `<link name="arm">` |
| `<joint>` | Connection | `<joint name="elbow">` |
| `<inertial>` | Mass properties | `<mass value="2.0">` |
| `<visual>` | Graphics | `<box size="1 1 1">` |
| `<collision>` | Physics | `<cylinder radius="0.1">` |
| `<origin>` | Position/Orientation | `<origin xyz="0 0 1">` |
| `<axis>` | Joint direction | `<axis xyz="0 1 0">` |

## Next Steps

Now that you can model robot structure with URDF, the final chapter of Module 2 will cover forward and inverse kinematics—calculating how to move your robot to reach specific positions and orientations.
